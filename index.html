<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Objetivos</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/license-styles.css">
    <!-- Font Awesome para iconos (local) -->
    <link rel="stylesheet" href="lib/css/fontawesome.min.css">
    <!-- Google Fonts (local) -->
    <link rel="stylesheet" href="lib/css/roboto.css">
</head>
<body>
    <div id="app">
        <!-- Contenido dinámico se cargará aquí -->
        <div id="login-container" class="container">
            <div class="login-card">
                <h2>Sistema de Objetivos</h2>
                <div id="error-message" class="error-message" style="display: none;"></div>
                <form id="login-form">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Contraseña</label>
                        <input type="password" id="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Iniciar Sesión</button>
                </form>
                <!-- Enlace de registro eliminado -->
            </div>
        </div>

        <div id="register-container" class="container" style="display: none;">
            <div class="login-card">
                <h2>Registro</h2>
                <div id="register-error-message" class="error-message" style="display: none;"></div>
                <form id="register-form">
                    <div class="form-group">
                        <label for="register-name">Nombre</label>
                        <input type="text" id="register-name" required>
                    </div>
                    <div class="form-group">
                        <label for="register-email">Email</label>
                        <input type="email" id="register-email" required>
                    </div>
                    <div class="form-group">
                        <label for="register-password">Contraseña</label>
                        <input type="password" id="register-password" required>
                    </div>
                    <div class="form-group">
                        <label for="register-confirm-password">Confirmar Contraseña</label>
                        <input type="password" id="register-confirm-password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Registrarse</button>
                </form>
                <p class="text-center mt-3">
                    <a href="#" id="login-link">Volver a Iniciar Sesión</a>
                </p>
            </div>
        </div>

        <div id="app-container" style="display: none;">
            <header class="header">
                <div class="header-container">
                    <h1>Sistema de Objetivos</h1>
                    <nav>
                        <ul>
                            <li><a href="#" class="nav-link" data-page="dashboard">Vista General</a></li>
                            <li><a href="#" class="nav-link" data-page="objetivos-monto">Objetivo Mensual</a></li>
                            <li><a href="#" class="nav-link" data-page="objetivos-unidades">Objetivos Unidades</a></li>
                            <li><a href="#" class="nav-link" data-page="creditos">Créditos</a></li>
                            <li><a href="#" class="nav-link" data-page="contacto">Contacto</a></li>
                            <li id="admin-link" style="display: none;"><a href="#" class="nav-link" data-page="admin">Admin</a></li>
                        </ul>
                    </nav>
                    <div class="user-info">
                        <span id="user-name"></span>
                        <button id="load-update" class="btn btn-small btn-secondary update-indicator" title="Cargar actualización">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <button id="logout-btn" class="btn btn-small">Cerrar Sesión</button>
                    </div>
                </div>
            </header>

            <main class="main-content">
                <!-- Dashboard -->
                <div id="dashboard-page" class="page">
                    <div class="page-header">
                        <h2>Vista General</h2>
                        <div class="actions">
                            <div class="date-selector">
                                <select id="dashboard-mes">
                                    <option value="1">Enero</option>
                                    <option value="2">Febrero</option>
                                    <option value="3">Marzo</option>
                                    <option value="4">Abril</option>
                                    <option value="5">Mayo</option>
                                    <option value="6">Junio</option>
                                    <option value="7">Julio</option>
                                    <option value="8">Agosto</option>
                                    <option value="9">Septiembre</option>
                                    <option value="10">Octubre</option>
                                    <option value="11">Noviembre</option>
                                    <option value="12">Diciembre</option>
                                </select>
                                <select id="dashboard-anio">
                                    <!-- Se llenará con JavaScript -->
                                </select>
                            </div>
                            <button id="refresh-dashboard" class="btn btn-secondary">
                                <i class="fas fa-sync-alt"></i> Refrescar Datos
                            </button>
                        </div>
                    </div>

                    <div class="welcome-message">
                        <h3>Bienvenido, <span id="user-name">Usuario</span></h3>
                        <p>Resumen del mes: <span id="current-month">Mes Actual</span></p>
                        <p>Día actual: <span id="current-day">Día</span> - Días hábiles restantes: <span id="remaining-workdays">0</span></p>
                    </div>

                    <div class="dashboard-grid">
                        <div class="card">
                            <h3>Objetivo Mensual (Monto)</h3>
                            <div class="objetivo-info">
                                <p class="objetivo-label">Objetivo Total:</p>
                                <p class="objetivo-value" id="monto-objetivo-total">$0</p>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress" id="monto-progress" style="width: 0%;"></div>
                                </div>
                                <p>Progreso: <span id="monto-porcentaje">0%</span></p>
                            </div>
                            <div class="card-stats">
                                <div>
                                    <p>Acumulado</p>
                                    <p id="monto-acumulado">$0</p>
                                </div>
                                <div>
                                    <p>Restante</p>
                                    <p id="monto-restante">$0</p>
                                </div>
                            </div>



                            <a href="#" class="card-link" data-page="objetivos-monto">Ver detalles →</a>
                        </div>

                        <div class="card">
                            <h3>Objetivo Mensual (Unidades)</h3>
                            <div class="objetivo-info">
                                <p class="objetivo-label">Objetivo Total:</p>
                                <p class="objetivo-value" id="unidades-objetivo-total">0 unidades</p>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress" id="unidades-progress" style="width: 0%;"></div>
                                </div>
                                <p>Progreso: <span id="unidades-porcentaje">0%</span></p>
                            </div>
                            <div class="card-stats">
                                <div>
                                    <p>Acumulado</p>
                                    <p id="unidades-acumulado">0</p>
                                </div>
                                <div>
                                    <p>Restante</p>
                                    <p id="unidades-restante">0</p>
                                </div>
                            </div>
                            <a href="#" class="card-link" data-page="objetivos-unidades">Ver detalles →</a>
                        </div>



                        <div class="card">
                            <h3>Resumen de Créditos</h3>
                            <div class="creditos-stats">
                                <div>
                                    <p>Nuevos Créditos</p>
                                    <p id="creditos-nuevos">0</p>
                                </div>
                                <div>
                                    <p>Renovaciones</p>
                                    <p id="creditos-renovaciones">0</p>
                                </div>
                                <div>
                                    <p>Cuotas Cobradas</p>
                                    <p id="creditos-cobrados">0</p>
                                </div>
                            </div>
                            <a href="#" class="card-link" data-page="creditos">Ver detalles →</a>
                        </div>
                    </div>

                    <div class="horizontal-card modern-card mt-4 compact-card">
                        <div class="modern-card-header compact-header">
                            <h3>Estadísticas de Tickets</h3>
                        </div>
                        <div class="modern-stats horizontal-stats compact-stats">
                            <div class="modern-stat-item compact-stat">
                                <div class="stat-icon compact-icon"><i class="fas fa-ticket-alt"></i></div>
                                <div class="stat-content">
                                    <p class="stat-value compact-value" id="dashboard-tickets-totales">0</p>
                                    <p class="stat-label compact-label">Tickets Totales</p>
                                </div>
                            </div>
                            <div class="modern-stat-item compact-stat">
                                <div class="stat-icon compact-icon"><i class="fas fa-calendar-day"></i></div>
                                <div class="stat-content">
                                    <p class="stat-value compact-value" id="dashboard-tickets-hoy">0</p>
                                    <p class="stat-label compact-label">Tickets Hoy</p>
                                </div>
                            </div>
                            <div class="modern-stat-item compact-stat">
                                <div class="stat-icon compact-icon"><i class="fas fa-chart-line"></i></div>
                                <div class="stat-content">
                                    <p class="stat-value compact-value"><span id="dashboard-promedio-ticket-valor">0.00</span></p>
                                    <p class="stat-label compact-label">Promedio</p>
                                    <p class="stat-sublabel compact-sublabel"><span id="dashboard-promedio-ticket-porcentaje">0.00%</span></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="horizontal-card modern-card mt-4">
                        <div class="modern-card-header">
                            <h3>Distribución por Empleados</h3>
                            <div class="employee-selector">
                                <label for="num-empleados">Empleados:</label>
                                <select id="num-empleados" class="form-control">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                </select>
                                <span class="days-info">
                                    <i class="fas fa-calendar-day"></i>
                                    <span id="dias-habiles-restantes-empleados">0</span> días hábiles
                                </span>
                            </div>
                        </div>

                        <div class="distribution-objectives">
                            <div class="distribution-row">
                                <div class="distribution-header">
                                    <div class="distribution-percentage">90%</div>
                                    <div class="distribution-label">Mínimo</div>
                                </div>
                                <div class="distribution-stats">
                                    <div class="distribution-stat">
                                        <div class="stat-icon"><i class="fas fa-dollar-sign"></i></div>
                                        <div class="stat-content">
                                            <p class="stat-value" id="monto-por-empleado-90">$0</p>
                                            <p class="stat-label">Monto diario</p>
                                        </div>
                                    </div>
                                    <div class="distribution-stat">
                                        <div class="stat-icon"><i class="fas fa-boxes"></i></div>
                                        <div class="stat-content">
                                            <p class="stat-value" id="unidades-por-empleado-90">0</p>
                                            <p class="stat-label">Unidades diarias</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="distribution-row">
                                <div class="distribution-header">
                                    <div class="distribution-percentage">100%</div>
                                    <div class="distribution-label">Estándar</div>
                                </div>
                                <div class="distribution-stats">
                                    <div class="distribution-stat">
                                        <div class="stat-icon"><i class="fas fa-dollar-sign"></i></div>
                                        <div class="stat-content">
                                            <p class="stat-value" id="monto-por-empleado">$0</p>
                                            <p class="stat-label">Monto diario</p>
                                        </div>
                                    </div>
                                    <div class="distribution-stat">
                                        <div class="stat-icon"><i class="fas fa-boxes"></i></div>
                                        <div class="stat-content">
                                            <p class="stat-value" id="unidades-por-empleado">0</p>
                                            <p class="stat-label">Unidades diarias</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="distribution-row">
                                <div class="distribution-header">
                                    <div class="distribution-percentage">115%</div>
                                    <div class="distribution-label">Óptimo</div>
                                </div>
                                <div class="distribution-stats">
                                    <div class="distribution-stat">
                                        <div class="stat-icon"><i class="fas fa-dollar-sign"></i></div>
                                        <div class="stat-content">
                                            <p class="stat-value" id="monto-por-empleado-115">$0</p>
                                            <p class="stat-label">Monto diario</p>
                                        </div>
                                    </div>
                                    <div class="distribution-stat">
                                        <div class="stat-icon"><i class="fas fa-boxes"></i></div>
                                        <div class="stat-content">
                                            <p class="stat-value" id="unidades-por-empleado-115">0</p>
                                            <p class="stat-label">Unidades diarias</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-4">
                        <h3>Proyecciones de Objetivo (Monto)</h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Porcentaje</th>
                                        <th>Monto Objetivo</th>
                                        <th>Monto Faltante</th>
                                        <th>Monto Diario Requerido</th>
                                    </tr>
                                </thead>
                                <tbody id="tabla-proyecciones">
                                    <tr>
                                        <td>80%</td>
                                        <td id="objetivo-80">$0</td>
                                        <td id="faltante-80">$0</td>
                                        <td id="diario-80">$0</td>
                                    </tr>
                                    <tr>
                                        <td>90%</td>
                                        <td id="objetivo-90">$0</td>
                                        <td id="faltante-90">$0</td>
                                        <td id="diario-90">$0</td>
                                    </tr>
                                    <tr>
                                        <td>100%</td>
                                        <td id="objetivo-100">$0</td>
                                        <td id="faltante-100">$0</td>
                                        <td id="diario-100">$0</td>
                                    </tr>
                                    <tr>
                                        <td>110%</td>
                                        <td id="objetivo-110">$0</td>
                                        <td id="faltante-110">$0</td>
                                        <td id="diario-110">$0</td>
                                    </tr>
                                    <tr>
                                        <td>115%</td>
                                        <td id="objetivo-115">$0</td>
                                        <td id="faltante-115">$0</td>
                                        <td id="diario-115">$0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card mt-4">
                        <h3>Proyecciones de Objetivo (Unidades)</h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Porcentaje</th>
                                        <th>Unidades Objetivo</th>
                                        <th>Unidades Faltantes</th>
                                        <th>Unidades Diarias</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>80%</td>
                                        <td id="objetivo-unidades-dashboard-80">0</td>
                                        <td id="faltante-unidades-dashboard-80">0</td>
                                        <td id="diario-unidades-dashboard-80">0</td>
                                    </tr>
                                    <tr>
                                        <td>90%</td>
                                        <td id="objetivo-unidades-dashboard-90">0</td>
                                        <td id="faltante-unidades-dashboard-90">0</td>
                                        <td id="diario-unidades-dashboard-90">0</td>
                                    </tr>
                                    <tr>
                                        <td>100%</td>
                                        <td id="objetivo-unidades-dashboard-100">0</td>
                                        <td id="faltante-unidades-dashboard-100">0</td>
                                        <td id="diario-unidades-dashboard-100">0</td>
                                    </tr>
                                    <tr>
                                        <td>110%</td>
                                        <td id="objetivo-unidades-dashboard-110">0</td>
                                        <td id="faltante-unidades-dashboard-110">0</td>
                                        <td id="diario-unidades-dashboard-110">0</td>
                                    </tr>
                                    <tr>
                                        <td>115%</td>
                                        <td id="objetivo-unidades-dashboard-115">0</td>
                                        <td id="faltante-unidades-dashboard-115">0</td>
                                        <td id="diario-unidades-dashboard-115">0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Objetivos Monto -->
                <div id="objetivos-monto-page" class="page" style="display: none;">
                    <div class="page-header">
                        <h2>Objetivo Mensual</h2>
                        <div class="actions">
                            <div class="date-selector">
                                <select id="monto-mes">
                                    <option value="1">Enero</option>
                                    <option value="2">Febrero</option>
                                    <option value="3">Marzo</option>
                                    <option value="4">Abril</option>
                                    <option value="5">Mayo</option>
                                    <option value="6">Junio</option>
                                    <option value="7">Julio</option>
                                    <option value="8">Agosto</option>
                                    <option value="9">Septiembre</option>
                                    <option value="10">Octubre</option>
                                    <option value="11">Noviembre</option>
                                    <option value="12">Diciembre</option>
                                </select>
                                <select id="monto-anio">
                                    <!-- Se llenará con JavaScript -->
                                </select>
                            </div>
                            <button id="exportar-monto" class="btn btn-secondary">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Objetivo Mensual</h3>
                        <div id="objetivo-monto-content">
                            <div class="objetivo-stats">
                                <div>
                                    <p class="stat-label">Objetivo</p>
                                    <p class="stat-value" id="objetivo-monto-valor">$10,000,000</p>
                                </div>
                                <div>
                                    <p class="stat-label">Acumulado</p>
                                    <p class="stat-value" id="objetivo-monto-acumulado">$8,500,000</p>
                                </div>
                            </div>

                            <div class="ticket-stats-container">
                                <h4>Estadísticas de Tickets</h4>
                                <div class="ticket-stats">
                                    <div>
                                        <p class="stat-label">Tickets Totales</p>
                                        <p class="stat-value" id="objetivo-monto-tickets">0</p>
                                    </div>
                                    <div>
                                        <p class="stat-label">Tickets Hoy</p>
                                        <p class="stat-value" id="objetivo-monto-tickets-hoy">0</p>
                                    </div>
                                    <div>
                                        <p class="stat-label">Promedio por Ticket</p>
                                        <p class="stat-value">
                                            <span id="objetivo-monto-promedio-valor">0.00</span>
                                            (<span id="objetivo-monto-promedio-porcentaje">0.00%</span>)
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div class="progress-container">
                                <div class="progress-header">
                                    <span>Progreso</span>
                                    <span id="objetivo-monto-porcentaje">85%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress" id="objetivo-monto-progress" style="width: 85%;"></div>
                                </div>
                                <div class="progress-footer">
                                    Nivel de cumplimiento: <span id="objetivo-monto-nivel">85%</span>
                                </div>
                            </div>

                            <div class="action-buttons">
                                <button id="editar-objetivo-monto" class="btn btn-secondary">
                                    <i class="fas fa-edit"></i> Editar Objetivo
                                </button>
                            </div>

                            <div id="admin-actions-monto" style="display: none;">
                            </div>
                        </div>

                        <div id="objetivo-monto-form" style="display: none;">
                            <p>No hay objetivo definido para este mes. Defina uno:</p>
                            <div class="form-inline">
                                <input type="number" id="nuevo-objetivo-monto" placeholder="Monto objetivo">
                                <button id="guardar-objetivo-monto" class="btn btn-primary">Guardar</button>
                            </div>
                        </div>
                    </div>

                    <div class="charts-grid">
                        <div class="card">
                            <div class="chart-header">
                                <h3>Ingresos Diarios</h3>
                                <button id="ampliar-grafica-ingresos" class="btn btn-small btn-secondary">
                                    <i class="fas fa-expand"></i> Vista Ampliada
                                </button>
                            </div>
                            <div class="chart-container">
                                <canvas id="chart-ingresos-monto"></canvas>
                            </div>
                        </div>

                        <div class="card">
                            <div class="chart-header">
                                <h3>Acumulado</h3>
                                <button id="ampliar-grafica-acumulado" class="btn btn-small btn-secondary">
                                    <i class="fas fa-expand"></i> Vista Ampliada
                                </button>
                            </div>
                            <div class="chart-container">
                                <canvas id="chart-acumulado-monto"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Modal para gráficas ampliadas -->
                    <div id="modal-grafica" class="modal" style="display: none;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3 id="modal-grafica-titulo">Gráfica Ampliada</h3>
                                <span id="cerrar-modal-grafica" class="modal-close">&times;</span>
                            </div>
                            <div class="modal-body">
                                <div class="chart-container-large">
                                    <canvas id="chart-modal"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Registro Diario de Montos</h3>
                        <form id="form-ingreso-monto" class="form-grid">
                            <input type="hidden" id="ingreso-monto-fecha">
                            <div class="form-group">
                                <label for="ingreso-monto-valor">Monto</label>
                                <input type="number" id="ingreso-monto-valor" min="0" required>
                            </div>
                            <div class="form-group">
                                <label for="ingreso-monto-tickets">Cantidad de Tickets</label>
                                <input type="number" id="ingreso-monto-tickets" min="1" value="1" required>
                            </div>
                            <div class="form-group form-group-submit">
                                <button type="submit" class="btn btn-primary">Guardar</button>
                            </div>
                        </form>

                        <div class="action-buttons">
                            <button id="borrar-dia-monto" class="btn btn-danger">
                                <i class="fas fa-trash"></i> Borrar Datos del Día
                            </button>
                            <button id="borrar-mes-monto" class="btn btn-danger">
                                <i class="fas fa-trash"></i> Borrar Datos del Mes
                            </button>
                        </div>

                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Monto</th>
                                        <th>Tickets</th>
                                    </tr>
                                </thead>
                                <tbody id="tabla-ingresos-monto">
                                    <!-- Se llenará con JavaScript -->
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td>Acumulado</td>
                                        <td id="tabla-monto-acumulado">$8,500,000</td>
                                        <td id="tabla-tickets-acumulado">0</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Objetivos Unidades -->
                <div id="objetivos-unidades-page" class="page" style="display: none;">
                    <div class="page-header">
                        <h2>Objetivos de Unidades</h2>
                        <div class="actions">
                            <div class="date-selector">
                                <select id="unidades-mes">
                                    <option value="1">Enero</option>
                                    <option value="2">Febrero</option>
                                    <option value="3">Marzo</option>
                                    <option value="4">Abril</option>
                                    <option value="5">Mayo</option>
                                    <option value="6">Junio</option>
                                    <option value="7">Julio</option>
                                    <option value="8">Agosto</option>
                                    <option value="9">Septiembre</option>
                                    <option value="10">Octubre</option>
                                    <option value="11">Noviembre</option>
                                    <option value="12">Diciembre</option>
                                </select>
                                <select id="unidades-anio">
                                    <!-- Se llenará con JavaScript -->
                                </select>
                            </div>
                            <button id="exportar-unidades" class="btn btn-secondary">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Objetivo Mensual de Unidades</h3>
                        <div id="objetivo-unidades-content">
                            <div class="objetivo-stats">
                                <div>
                                    <p class="stat-label">Objetivo</p>
                                    <p class="stat-value" id="objetivo-unidades-valor">50 unidades</p>
                                </div>
                                <div>
                                    <p class="stat-label">Acumulado</p>
                                    <p class="stat-value" id="objetivo-unidades-acumulado">46 unidades</p>
                                </div>
                            </div>

                            <div class="progress-container">
                                <div class="progress-header">
                                    <span>Progreso</span>
                                    <span id="objetivo-unidades-porcentaje">92%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress" id="objetivo-unidades-progress" style="width: 92%;"></div>
                                </div>
                                <div class="progress-footer">
                                    Nivel de cumplimiento: <span id="objetivo-unidades-nivel">90%</span>
                                </div>
                            </div>

                            <div class="action-buttons">
                                <button id="editar-objetivo-unidades" class="btn btn-secondary">
                                    <i class="fas fa-edit"></i> Editar Objetivo
                                </button>
                            </div>

                            <div id="admin-actions-unidades" style="display: none;">
                            </div>
                        </div>

                        <div id="objetivo-unidades-form" style="display: none;">
                            <p>No hay objetivo definido para este mes. Defina uno:</p>
                            <div class="form-inline">
                                <input type="number" id="nuevo-objetivo-unidades" placeholder="Unidades objetivo">
                                <button id="guardar-objetivo-unidades" class="btn btn-primary">Guardar</button>
                            </div>
                        </div>
                    </div>



                    <div class="charts-grid">
                        <div class="card">
                            <h3>Unidades Diarias</h3>
                            <div class="chart-container">
                                <canvas id="chart-ingresos-unidades"></canvas>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Acumulado</h3>
                            <div class="chart-container">
                                <canvas id="chart-acumulado-unidades"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Registro Diario de Unidades</h3>
                        <form id="form-ingreso-unidades" class="form-grid">
                            <input type="hidden" id="ingreso-unidades-fecha">
                            <div class="form-group">
                                <label for="ingreso-unidades-valor">Unidades</label>
                                <input type="number" id="ingreso-unidades-valor" min="0" required>
                            </div>
                            <div class="form-group form-group-submit">
                                <button type="submit" class="btn btn-primary">Guardar</button>
                            </div>
                        </form>

                        <div class="action-buttons">
                            <button id="borrar-dia-unidades" class="btn btn-danger">
                                <i class="fas fa-trash"></i> Borrar Datos del Día
                            </button>
                            <button id="borrar-mes-unidades" class="btn btn-danger">
                                <i class="fas fa-trash"></i> Borrar Datos del Mes
                            </button>
                        </div>

                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Unidades</th>
                                    </tr>
                                </thead>
                                <tbody id="tabla-ingresos-unidades">
                                    <!-- Se llenará con JavaScript -->
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td>Acumulado</td>
                                        <td id="tabla-unidades-acumulado">46</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Créditos -->
                <div id="creditos-page" class="page" style="display: none;">
                    <div class="page-header">
                        <h2>Gestión de Créditos</h2>
                        <div class="actions">
                            <div class="date-selector">
                                <select id="creditos-mes">
                                    <option value="1">Enero</option>
                                    <option value="2">Febrero</option>
                                    <option value="3">Marzo</option>
                                    <option value="4">Abril</option>
                                    <option value="5">Mayo</option>
                                    <option value="6">Junio</option>
                                    <option value="7">Julio</option>
                                    <option value="8">Agosto</option>
                                    <option value="9">Septiembre</option>
                                    <option value="10">Octubre</option>
                                    <option value="11">Noviembre</option>
                                    <option value="12">Diciembre</option>
                                </select>
                                <select id="creditos-anio">
                                    <!-- Se llenará con JavaScript -->
                                </select>
                            </div>
                            <button id="exportar-creditos" class="btn btn-secondary">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                        </div>
                    </div>

                    <div class="cards-grid">
                        <div class="card">
                            <h3>Nuevos Créditos</h3>
                            <div class="credito-stats">
                                <p class="stat-label">Cantidad</p>
                                <p class="stat-value" id="creditos-nuevos-cantidad">15</p>
                                <p class="stat-label mt-3">Monto Total</p>
                                <p class="stat-value" id="creditos-nuevos-monto">$7,500,000</p>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Renovaciones</h3>
                            <div class="credito-stats">
                                <p class="stat-label">Cantidad</p>
                                <p class="stat-value" id="creditos-renovaciones-cantidad">25</p>
                                <p class="stat-label mt-3">Monto Total</p>
                                <p class="stat-value" id="creditos-renovaciones-monto">$12,500,000</p>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Cuotas Cobradas</h3>
                            <div class="credito-stats">
                                <p class="stat-label">Cantidad</p>
                                <p class="stat-value" id="creditos-cobrados-cantidad">6</p>
                                <p class="stat-label mt-3">Monto Total</p>
                                <p class="stat-value" id="creditos-cobrados-monto">$3,000,000</p>
                            </div>
                        </div>
                    </div>

                    <div class="charts-grid">
                        <div class="card">
                            <h3>Distribución por Tipo</h3>
                            <div class="chart-container">
                                <canvas id="chart-distribucion-creditos"></canvas>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Montos por Tipo</h3>
                            <div class="chart-container">
                                <canvas id="chart-montos-creditos"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="creditos-forms-container">
                        <div class="card">
                            <h3>Registrar Nuevo Crédito</h3>
                            <form id="form-credito-nuevo" class="form-credito">
                                <input type="hidden" id="credito-nuevo-fecha">
                                <div class="form-group">
                                    <label for="credito-nuevo-monto">Monto</label>
                                    <input type="number" id="credito-nuevo-monto" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label for="credito-nuevo-cantidad">Cantidad (0-50)</label>
                                    <input type="number" id="credito-nuevo-cantidad" min="0" max="50" value="1" required>
                                    <small class="form-text">Ingrese 0 si no hubo créditos este día</small>
                                </div>
                                <div class="form-group form-group-submit">
                                    <button type="submit" class="btn btn-primary">Guardar Nuevo Crédito</button>
                                </div>
                            </form>
                            <div class="action-buttons mt-2">
                                <button id="editar-credito-nuevo" class="btn btn-secondary">
                                    <i class="fas fa-edit"></i> Editar Crédito
                                </button>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Registrar Renovación</h3>
                            <form id="form-credito-renovacion" class="form-credito">
                                <input type="hidden" id="credito-renovacion-fecha">
                                <div class="form-group">
                                    <label for="credito-renovacion-monto">Monto</label>
                                    <input type="number" id="credito-renovacion-monto" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label for="credito-renovacion-cantidad">Cantidad (0-50)</label>
                                    <input type="number" id="credito-renovacion-cantidad" min="0" max="50" value="1" required>
                                    <small class="form-text">Ingrese 0 si no hubo renovaciones este día</small>
                                </div>
                                <div class="form-group form-group-submit">
                                    <button type="submit" class="btn btn-primary">Guardar Renovación</button>
                                </div>
                            </form>
                            <div class="action-buttons mt-2">
                                <button id="editar-credito-renovacion" class="btn btn-secondary">
                                    <i class="fas fa-edit"></i> Editar Renovación
                                </button>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Registrar Cuota Cobrada</h3>
                            <form id="form-credito-cobrado" class="form-credito">
                                <input type="hidden" id="credito-cobrado-fecha">
                                <div class="form-group">
                                    <label for="credito-cobrado-monto">Monto</label>
                                    <input type="number" id="credito-cobrado-monto" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label for="credito-cobrado-cantidad">Cantidad (0-50)</label>
                                    <input type="number" id="credito-cobrado-cantidad" min="0" max="50" value="1" required>
                                    <small class="form-text">Ingrese 0 si no hubo cuotas cobradas este día</small>
                                </div>
                                <div class="form-group form-group-submit">
                                    <button type="submit" class="btn btn-primary">Guardar Cuota Cobrada</button>
                                </div>
                            </form>
                            <div class="action-buttons mt-2">
                                <button id="editar-credito-cobrado" class="btn btn-secondary">
                                    <i class="fas fa-edit"></i> Editar Cuota Cobrada
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="table-header">
                            <h3>Listado de Créditos</h3>
                            <div class="filter-actions">
                                <select id="filtro-creditos">
                                    <option value="todos">Todos</option>
                                    <option value="nuevo">Nuevos</option>
                                    <option value="renovacion">Renovaciones</option>
                                    <option value="cobrado">Cuotas Cobradas</option>
                                </select>
                                <div class="action-buttons ml-2">
                                    <button id="eliminar-creditos-dia" class="btn btn-danger btn-small">
                                        <i class="fas fa-trash"></i> Eliminar por Día
                                    </button>
                                    <button id="eliminar-creditos-mes" class="btn btn-danger btn-small">
                                        <i class="fas fa-trash"></i> Eliminar Mes
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Tipo</th>
                                        <th>Monto</th>
                                        <th>Cliente</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tabla-creditos">
                                    <!-- Se llenará con JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Admin -->
                <div id="admin-page" class="page" style="display: none;">
                    <div class="page-header">
                        <h2>Administración</h2>
                        <button id="exportar-usuarios" class="btn btn-secondary">
                            <i class="fas fa-download"></i> Exportar Usuarios
                        </button>
                    </div>

                    <div class="card">
                        <h3>Crear Nuevo Usuario</h3>
                        <form id="form-nuevo-usuario" class="form-grid">
                            <div class="form-group">
                                <label for="nuevo-usuario-email">Correo Electrónico</label>
                                <input type="email" id="nuevo-usuario-email" required>
                            </div>
                            <div class="form-group">
                                <label for="nuevo-usuario-nombre">Nombre Completo</label>
                                <input type="text" id="nuevo-usuario-nombre" required>
                            </div>
                            <div class="form-group">
                                <label for="nuevo-usuario-password">Contraseña</label>
                                <input type="password" id="nuevo-usuario-password" required>
                            </div>
                            <div class="form-group">
                                <label for="nuevo-usuario-rol">Rol</label>
                                <select id="nuevo-usuario-rol" required>
                                    <option value="usuario">Usuario Regular</option>
                                    <option value="admin">Administrador</option>
                                </select>
                            </div>
                            <div class="form-group form-group-submit">
                                <button type="submit" class="btn btn-primary">Crear Usuario</button>
                            </div>
                        </form>
                    </div>

                    <div class="card">
                        <h3>Gestión de Usuarios</h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Email</th>
                                        <th>Nombre</th>
                                        <th>Rol</th>
                                        <th>Fecha de Registro</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tabla-usuarios">
                                    <!-- Se llenará con JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Información del Sistema</h3>
                        <div class="system-info">
                            <div class="info-item">
                                <p class="info-label">Total de Usuarios</p>
                                <p class="info-value" id="total-usuarios">0</p>
                            </div>
                            <div class="info-item">
                                <p class="info-label">Administradores</p>
                                <p class="info-value" id="total-admins">0</p>
                            </div>
                            <div class="info-item">
                                <p class="info-label">Usuarios Regulares</p>
                                <p class="info-value" id="total-regulares">0</p>
                            </div>
                            <div class="info-item">
                                <p class="info-label">Base de Datos</p>
                                <p class="info-value">SQLite (Local)</p>
                            </div>
                            <div class="info-item">
                                <p class="info-label">Versión</p>
                                <p class="info-value" id="current-version">2.0.0 (Producción)</p>
                            </div>
                        </div>

                        <div class="license-management mt-4">
                            <h4>Gestión de Licencias</h4>
                            <p>Genere y administre licencias para el sistema.</p>
                            <div class="license-buttons">
                                <button id="show-license-info" class="btn btn-info">
                                    <i class="fas fa-info-circle"></i> Ver Licencia Actual
                                </button>
                                <button id="activate-license-manually" class="btn btn-secondary">
                                    <i class="fas fa-key"></i> Activar Licencia
                                </button>
                                <a href="admin/licenses.html" class="btn btn-primary" target="_blank">
                                    <i class="fas fa-cog"></i> Generador de Licencias
                                </a>
                            </div>
                        </div>

                        <div class="admin-actions mt-3">
                            <button id="reset-database" class="btn btn-danger">
                                <i class="fas fa-trash"></i> Borrar Base de Datos
                            </button>
                            <p class="text-danger mt-2"><small>¡Advertencia! Esta acción eliminará todos los datos de objetivos, unidades y créditos. No se puede deshacer.</small></p>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Generar Actualización</h3>
                        <p>Cree un archivo de actualización para distribuir a otras instalaciones del sistema.</p>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="update-version">Nueva Versión</label>
                                <input type="text" id="update-version" placeholder="Ej: 1.2.0" value="1.2.0">
                            </div>

                            <div class="form-group">
                                <label>Cambios en esta versión</label>
                                <div id="update-changes-container">
                                    <div class="update-change-item">
                                        <input type="text" class="update-change" placeholder="Descripción del cambio">
                                        <button type="button" class="btn btn-small btn-danger remove-change"><i class="fas fa-times"></i></button>
                                    </div>
                                </div>
                                <button type="button" id="add-change" class="btn btn-small btn-secondary mt-2">
                                    <i class="fas fa-plus"></i> Agregar cambio
                                </button>
                            </div>

                            <div class="form-group form-group-submit">
                                <button id="generate-update" class="btn btn-primary">
                                    <i class="fas fa-file-export"></i> Generar Archivo de Actualización
                                </button>
                            </div>
                        </div>

                        <div id="update-generation-status" class="mt-3" style="display: none;"></div>
                    </div>
                </div>

                <!-- Página de Contacto -->
                <div id="contacto-page" class="page" style="display: none;">
                    <div class="page-header">
                        <h2>Contacto</h2>
                    </div>

                    <div class="card contact-card">
                        <div class="contact-card-header">
                            <h3>Formulario de Contacto</h3>
                            <p class="contact-intro">Complete el siguiente formulario para ponerse en contacto con nosotros. Responderemos a la brevedad.</p>
                        </div>

                        <form id="contact-form" class="contact-form" action="https://formspree.io/f/mqaqaqze" method="POST" enctype="multipart/form-data">
                            <input type="hidden" name="_subject" value="Nuevo mensaje desde Sistema de Objetivos">
                            <input type="hidden" name="_next" value="gracias.html">
                            <div class="form-group">
                                <label for="contact-name">Nombre</label>
                                <div class="input-container">
                                    <i class="fas fa-user input-icon"></i>
                                    <input type="text" id="contact-name" name="name" placeholder="Su nombre" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="contact-email">Correo Electrónico</label>
                                <div class="input-container">
                                    <i class="fas fa-envelope input-icon"></i>
                                    <input type="email" id="contact-email" name="email" placeholder="ejemplo@correo.com" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="contact-phone">Teléfono</label>
                                <div class="input-container">
                                    <i class="fas fa-phone input-icon"></i>
                                    <input type="tel" id="contact-phone" name="phone" placeholder="Su número de teléfono" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="contact-message">Mensaje</label>
                                <div class="input-container">
                                    <textarea id="contact-message" name="message" rows="5" placeholder="Escriba su mensaje aquí..." required></textarea>
                                </div>
                            </div>
                            <div class="form-group submit-group">
                                <button type="submit" class="btn btn-primary submit-btn">
                                    <i class="fas fa-paper-plane"></i> Enviar Mensaje
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="card contact-card mt-4">
                        <div class="contact-card-header">
                            <h3>Información de Contacto</h3>
                        </div>
                        <div class="contact-info">
                            <div class="contact-item">
                                <i class="fas fa-envelope"></i>
                                <div class="contact-item-content">
                                    <h4>Correo Electrónico</h4>
                                    <p>g.bronzi91@gmail.com</p>
                                </div>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-code"></i>
                                <div class="contact-item-content">
                                    <h4>Desarrollador</h4>
                                    <p>Diseñado por Mauricio Bronzi</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Chart.js para gráficos (local) -->
    <script src="lib/js/chart.min.js"></script>
    <!-- SheetJS para exportación a Excel (local) -->
    <script src="lib/js/xlsx.full.min.js"></script>
    <!-- FileSaver.js para guardar archivos (local) -->
    <script src="lib/js/FileSaver.min.js"></script>
    <!-- SQLite.js para base de datos local (local) -->
    <script src="lib/js/sql-wasm.js"></script>
    <!-- EmailJS para envío de correos (local) -->
    <script type="text/javascript" src="lib/js/email.min.js"></script>

    <!-- Scripts de la aplicación -->
    <script src="js/db.js"></script>
    <script src="js/single-instance.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/objetivos-monto.js"></script>
    <script src="js/objetivos-unidades.js"></script>
    <script src="js/creditos.js"></script>
    <script src="js/contacto.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/export.js"></script>
    <script src="js/updater.js"></script>
    <script src="js/security.js"></script>
    <script src="js/simple-crypto.js"></script>
    <script src="js/license-info.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
